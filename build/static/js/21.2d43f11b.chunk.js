"use strict";(self.webpackChunkmy_project=self.webpackChunkmy_project||[]).push([[21],{50792:function(e,r,t){var s=t(29439),c=t(72791),a=t(67174),i=(t(50660),t(80184));r.Z=function(e){var r=(0,c.useState)(""),t=(0,s.Z)(r,2),n=t[0],o=t[1];return(0,c.useEffect)((function(){void 0!==e.service.categoryid&&null!==e.service.categoryid&&o(e.categoryOptions[e.service.categoryid.toString()])}),[e.categoryOptions]),e.isFullDetail?(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{children:e.service.servicename}),(0,i.jsxs)(a.Z,{children:[(0,i.jsx)(a.Z.Item,{label:"service ID",children:e.service.serviceid}),(0,i.jsx)(a.Z.Item,{label:"provider ID",children:e.service.providerid})]}),(0,i.jsxs)(a.Z,{children:[(0,i.jsx)(a.Z.Item,{label:"prices",children:e.service.prices}),(0,i.jsx)(a.Z.Item,{label:"category",children:n})]}),(0,i.jsx)(a.Z,{children:(0,i.jsx)(a.Z.Item,{label:"Available Time",children:e.service.availableservicetime})}),(0,i.jsx)(a.Z,{children:(0,i.jsx)(a.Z.Item,{label:"Description",children:e.service.description})}),(0,i.jsx)(a.Z,{children:(0,i.jsx)(a.Z.Item,{label:"Arearscover",children:e.service.arearscover})})]}):(0,i.jsxs)("div",{children:[(0,i.jsxs)(a.Z,{children:[(0,i.jsx)(a.Z.Item,{label:"prices",children:e.service.prices}),(0,i.jsx)(a.Z.Item,{label:"category",children:n})]}),(0,i.jsx)(a.Z,{children:(0,i.jsx)(a.Z.Item,{label:"Description",children:e.service.description})}),(0,i.jsx)(a.Z,{children:(0,i.jsx)(a.Z.Item,{label:"Arearscover",children:e.service.arearscover})})]})}},58689:function(e,r,t){t.d(r,{Z:function(){return f}});var s=t(74165),c=t(15861),a=t(29439),i=t(72791),n=t(9555),o=t(77846),l=t(46988),u=t(87309),d=t(57689),v=t(50660),h="search_search__aPDqM",p="search_form__AE5mJ",g=t(80184);n.Z.Option;var f=function(e){var r=o.Z.useForm(),t=(0,a.Z)(r,1)[0],f=(0,i.useState)([{}]),m=(0,a.Z)(f,2),x=m[0],Z=m[1],y=(0,i.useState)([]),j=(0,a.Z)(y,2),S=j[0],R=j[1],b=(0,d.s0)(),C=(0,i.useState)(!1),I=(0,a.Z)(C,2),E=I[0],_=I[1];function k(){return(k=(0,c.Z)((0,s.Z)().mark((function e(){var r,t,c,i,n,o,l,u,d,h;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Server Request (no  param)"),e.prev=1,e.next=4,(0,v.WI)();case 4:if(r=e.sent,t=r.code,c=r.data,i=r.message,200==t){e.next=11;break}return console.log("Server Request ERROR, code = ",t,", message = ",i),e.abrupt("return");case 11:return console.log("Server Request SUCCESS: data = ",c),n=Object.entries(c).map((function(e){var r=(0,a.Z)(e,2),t=r[0];return{label:r[1],value:t}})),console.log("Service search categories = ",n),Z(n),e.next=17,(0,v.is)();case 17:if(o=e.sent,l=o.code,u=o.data,d=o.message,200==l){e.next=24;break}return console.log("Server Request ERROR, code = ",l,", message = ",d),e.abrupt("return");case 24:console.log("Server Request SUCCESS: data = ",u),h=u.map((function(e){return{label:e,value:e}})),console.log("Service search cities = ",h),R(h),e.next=34;break;case 30:e.prev=30,e.t0=e.catch(1),_(!0),console.log("Server Request ERROR: error = ",e.t0);case 34:case"end":return e.stop()}}),e,null,[[1,30]])})))).apply(this,arguments)}return(0,i.useEffect)((function(){E&&l.ZP.error("Server error!")}),[E]),(0,i.useEffect)((function(){!function(){k.apply(this,arguments)}()}),[]),(0,i.useEffect)((function(){0!=Object.keys(e).length&&(console.log("load init data",e),t.setFieldsValue({city:e.initCity,categoryid:e.initCategoryid}))}),[x]),(0,g.jsx)("div",{className:h,children:(0,g.jsxs)(o.Z,{className:p,layout:"inline",colon:!1,form:t,onFinish:function(e){console.log("Submit Search:",e),b("/servicesearch/searchresult",{state:e})},children:[(0,g.jsx)(o.Z.Item,{name:"categoryid",label:"Category",rules:[{required:!1}],children:(0,g.jsx)(n.Z,{placeholder:"Select category",allowClear:!0,options:x})}),(0,g.jsx)(o.Z.Item,{name:"city",label:"City",rules:[{required:!1}],children:(0,g.jsx)(n.Z,{placeholder:"Select city",allowClear:!0,options:S})}),(0,g.jsx)(o.Z.Item,{children:(0,g.jsx)(u.ZP,{type:"primary",htmlType:"submit",children:"Search"})})]})})}},98021:function(e,r,t){t.r(r),t.d(r,{default:function(){return b}});var s=t(58689),c=t(74165),a=t(15861),i=t(29439),n=t(70881),o=t(83099),l=t(46988),u=t(78792),d=t(2962),v=t(72791),h=t(57689),p="searchResultBox_searchResultBox__acl4j",g="searchResultBox_list__Rkvkb",f="searchResultBox_item__s7Zmt",m=t(50660),x=t(50792),Z=t(80184),y=function(e){var r=e.icon,t=e.text;return(0,Z.jsxs)(o.Z,{children:[v.createElement(r),t]})};var j=function(e){var r=5,t=(0,v.useState)([{}]),s=(0,i.Z)(t,2),o=s[0],j=s[1],S=(0,v.useState)(!1),R=(0,i.Z)(S,2),b=R[0],C=R[1],I=(0,h.s0)(),E=(0,v.useState)([]),_=(0,i.Z)(E,2),k=_[0],q=_[1],w=(0,v.useState)(1),O=(0,i.Z)(w,2),P=O[0],D=O[1],N=(0,v.useState)(1),A=(0,i.Z)(N,2),z=A[0],B=A[1],F=(0,v.useState)(!1),M=(0,i.Z)(F,2),U=M[0],T=M[1];function L(){return(L=(0,a.Z)((0,c.Z)().mark((function e(){var r,t,s,a;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Server Request (no  param)"),e.prev=1,e.next=4,(0,m.WI)();case 4:if(r=e.sent,t=r.code,s=r.data,a=r.message,200==t){e.next=11;break}return console.log("Server Request ERROR, code = ",t,", message = ",a),e.abrupt("return");case 11:console.log("Server Request SUCCESS: data = ",s),console.log("Service result list categories = ",s),j(s),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),T(!0),console.log("Server Request ERROR: error = ",e.t0);case 20:case"end":return e.stop()}}),e,null,[[1,16]])})))).apply(this,arguments)}function V(e){return W.apply(this,arguments)}function W(){return(W=(0,a.Z)((0,c.Z)().mark((function t(s){var a,i,n,o,l;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={page:z,limit:r},s&&(a={page:1,limit:r}),null!==e.city&&void 0!==e.city&&(a.city=e.city),null!==e.categoryid&&void 0!==e.categoryid&&(a.id=e.categoryid),console.log("Server Request = ",a),t.prev=5,t.next=8,(0,m.eE)(a);case 8:if(i=t.sent,n=i.code,o=i.data,l=i.message,200==n){t.next=15;break}return console.log("Server Request ERROR, code = ",n,", message = ",l),t.abrupt("return");case 15:console.log("Server Request SUCCESS: data = ",o),D(o.total),q(o.records),C(!0),t.next=25;break;case 21:t.prev=21,t.t0=t.catch(5),T(!0),console.log("Server Request ERROR: error = ",t.t0);case 25:case"end":return t.stop()}}),t,null,[[5,21]])})))).apply(this,arguments)}return(0,v.useEffect)((function(){U&&l.ZP.error("Server error!")}),[U]),(0,v.useEffect)((function(){!function(){L.apply(this,arguments)}()}),[]),(0,v.useEffect)((function(){V(!0),B(1)}),[e]),(0,v.useEffect)((function(){V(!1)}),[z]),b?(0,Z.jsx)("div",{className:p,children:(0,Z.jsx)(u.ZP,{className:g,itemLayout:"vertical",size:"large",pagination:{onChange:function(e){B(e),console.log("flip over new page =",e),C(!1)},current:z,pageSize:r,total:P},dataSource:k,renderItem:function(e){return(0,Z.jsxs)(u.ZP.Item,{className:f,actions:[(0,Z.jsx)(y,{icon:n.Z,text:e.city},"list-vertical-city-o")],extra:(0,Z.jsx)("img",{width:272,alt:"service image",src:e.photos}),onClick:function(){return r=e.serviceid,console.log("Click item id = ",r),void I("/servicesearch/searchresult/serviceDetail",{state:{serviceid:r}});var r},children:[(0,Z.jsx)(u.ZP.Item.Meta,{avatar:(0,Z.jsx)(d.C,{src:"https://xsgames.co/randomusers/avatar.php?g=pixel&key=".concat(e.providerid)}),title:(0,Z.jsx)("p",{children:"Service ID: ".concat(e.serviceid)}),description:(0,Z.jsx)("p",{children:"Provider ID: ".concat(e.providerid)})}),(0,Z.jsx)(x.Z,{service:e,categoryOptions:o})]},e.serviceid)}})}):(0,Z.jsx)("div",{className:p,children:(0,Z.jsx)("p",{children:"Loading..."})})},S="searchResultPage_searchResultPage__hauVn",R="searchResultPage_title__0bofy";var b=function(){var e,r,t,c=(0,h.TH)(),a={searchInput:null,city:null,categoryid:null};return void 0!==c.state&&null!==c.state&&(a=c.state),console.log("SearchResultPage get search input data:",a),(0,Z.jsxs)("div",{className:S,children:[(0,Z.jsx)("p",{className:R,children:"Available Service"}),(0,Z.jsx)(s.Z,{initCity:a.city,initCategoryid:a.categoryid}),(0,Z.jsx)(j,{searchInput:null===(e=a)||void 0===e?void 0:e.searchInput,city:null===(r=a)||void 0===r?void 0:r.city,categoryid:null===(t=a)||void 0===t?void 0:t.categoryid})]})}},70881:function(e,r,t){t.d(r,{Z:function(){return o}});var s=t(1413),c=t(72791),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 289.1a362.49 362.49 0 00-79.9-115.7 370.83 370.83 0 00-118.2-77.8C610.7 76.6 562.1 67 512 67c-50.1 0-98.7 9.6-144.5 28.5-44.3 18.3-84 44.5-118.2 77.8A363.6 363.6 0 00169.4 289c-19.5 45-29.4 92.8-29.4 142 0 70.6 16.9 140.9 50.1 208.7 26.7 54.5 64 107.6 111 158.1 80.3 86.2 164.5 138.9 188.4 153a43.9 43.9 0 0022.4 6.1c7.8 0 15.5-2 22.4-6.1 23.9-14.1 108.1-66.8 188.4-153 47-50.4 84.3-103.6 111-158.1C867.1 572 884 501.8 884 431.1c0-49.2-9.9-97-29.4-142zM512 880.2c-65.9-41.9-300-207.8-300-449.1 0-77.9 31.1-151.1 87.6-206.3C356.3 169.5 431.7 139 512 139s155.7 30.5 212.4 85.9C780.9 280 812 353.2 812 431.1c0 241.3-234.1 407.2-300 449.1zm0-617.2c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 551c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 439c0-29.9 11.7-58 32.8-79.2C454 338.6 482.1 327 512 327c29.9 0 58 11.6 79.2 32.8C612.4 381 624 409.1 624 439c0 29.9-11.6 58-32.8 79.2z"}}]},name:"environment",theme:"outlined"},i=t(54291),n=function(e,r){return c.createElement(i.Z,(0,s.Z)((0,s.Z)({},e),{},{ref:r,icon:a}))};n.displayName="EnvironmentOutlined";var o=c.forwardRef(n)}}]);
//# sourceMappingURL=21.2d43f11b.chunk.js.map